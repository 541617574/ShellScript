

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>常用命令 &mdash; ShellScript 1.0.0 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../../genindex.html"/>
        <link rel="search" title="搜索" href="../../search.html"/>
    <link rel="top" title="ShellScript 1.0.0 文档" href="../../index.html"/>
        <link rel="up" title="常用类库" href="../index.html"/>
        <link rel="next" title="常用函数" href="../2-commonfunc/index.html"/>
        <link rel="prev" title="常用环境变量" href="../0-commonvar/index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ShellScript
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../1-syntax/index.html">语法基础</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">常用类库</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../0-commonvar/index.html">常用环境变量</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">常用命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2-commonfunc/index.html">常用函数</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../3-sample/index.html">脚本示例</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ShellScript</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">常用类库</a> &raquo;</li>
        
      <li>常用命令</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/2-library/1-commoncmd/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>常用命令<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>shell脚本可以理解为shell命令的集合，shell命令可以分为两大类</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">shell内部命令(builtin</span> <span class="pre">command)</span></code>：在bash中内部实现的命令叫做内建命令，在文件系统上没有对应的可执行文件</li>
<li><code class="docutils literal"><span class="pre">shell外部命令(binary</span> <span class="pre">command)</span></code>：在文件系统上的某个位置(/bin、/sbin等)有一个与命令名称对应的可执行文件</li>
</ul>
<p>关于shell脚本中可能会用到的shell命令可以参考：<a class="reference external" href="http://codetoolchains.readthedocs.io/en/latest/4-Linux/2-shellcmd/index.html">linux工具集之shell命令</a></p>
<p>在此处我们主要介绍下shell脚本中使用频次最高的几个命令</p>
<ul class="simple">
<li><a class="reference external" href="#readll">read</a>：获取用户输入</li>
<li><a class="reference external" href="#echoll">echo</a>：打印输出</li>
<li><a class="reference external" href="#printfll">printf</a>：打印输出</li>
<li><a class="reference external" href="#shiftll">shift</a>：剔除位置参数</li>
</ul>
<div class="section" id="x00-read">
<span id="readll"></span><h2>0x00 read<a class="headerlink" href="#x00-read" title="永久链接至标题">¶</a></h2>
<p>参考文档：<a class="reference external" href="http://www.cnblogs.com/f-ck-need-u/p/7402149.html">shell脚本之read命令</a></p>
<p><code class="docutils literal"><span class="pre">read</span></code>命令是用来获取用户输入内容，即标准输入设备(键盘)输入内容，它是shell内建命令，使用<code class="docutils literal"><span class="pre">help</span> <span class="pre">read</span></code>命令可以查看其语法格式和使用说明，它的语法格式如下</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">read</span> <span class="o">[</span>-ers<span class="o">]</span> <span class="o">[</span>-a array<span class="o">]</span> <span class="o">[</span>-d delim<span class="o">]</span> <span class="o">[</span>-i text<span class="o">]</span> <span class="o">[</span>-n nchars<span class="o">]</span> <span class="o">[</span>-N nchars<span class="o">]</span> <span class="o">[</span>-p prompt<span class="o">]</span> <span class="o">[</span>-t timeout<span class="o">]</span> <span class="o">[</span>-u fd<span class="o">]</span> <span class="o">[</span>var_name ...<span class="o">]</span>
</pre></div>
</div>
<p>其执行逻辑如下</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">read</span></code>命令从标准输入设备中读取输入单行，默认单行的结束符号为回车换行符</p>
<blockquote>
<div><ul class="simple">
<li>此处需要注意的是：不带任何选项的read命令，只有按下回车键才能结束read命令的读取</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">然后将读取的单行根据<code class="docutils literal"><span class="pre">IFS</span></code>环境变量分裂成多个字段，并将分割后的字段分别赋值给<code class="docutils literal"><span class="pre">read</span></code>命令后面指定的变量列表<code class="docutils literal"><span class="pre">var_name</span></code>，其赋值逻辑如下</p>
<blockquote>
<div><ul class="simple">
<li>第一个字段分配给第一个变量<code class="docutils literal"><span class="pre">var_name1</span></code>，第二个字段分配给第二个变量<code class="docutils literal"><span class="pre">var_name2</span></code>，依次到结束</li>
<li>如果指定的变量名少于字段数量，则多出的字段数量也同样分配给最后一个<code class="docutils literal"><span class="pre">var_name</span></code></li>
<li>如果指定的变量命令多于字段数量，则多出的变量赋值为空</li>
<li>如果没有指定任何<code class="docutils literal"><span class="pre">var_name</span></code>，则分割后的所有字段都存储在特定变量<code class="docutils literal"><span class="pre">REPLY</span></code>中</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>read命令的常用选项有</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-a</span></code>：将分隔后的字段依次存储到<code class="docutils literal"><span class="pre">-a</span></code>指定的数组中，存储的起始位置从数组的<code class="docutils literal"><span class="pre">index=0</span></code>开始</li>
<li><code class="docutils literal"><span class="pre">-d</span></code>：指定读取行的结束符号，默认结束符号为换行符</li>
<li><code class="docutils literal"><span class="pre">-n</span></code>：限制读取<code class="docutils literal"><span class="pre">N</span></code>个字符就自动结束读取，如果没有读满<code class="docutils literal"><span class="pre">N</span></code>个字符就按下回车或遇到换行符，则也会结束读取</li>
<li><code class="docutils literal"><span class="pre">-N</span></code>：严格要求读满<code class="docutils literal"><span class="pre">N</span></code>个字符才自动结束读取，即使中途按下了回车或遇到了换行符也不结束，其中换行符或回车算一个字符</li>
<li><code class="docutils literal"><span class="pre">-p</span></code>：输出提示符或提示语，默认不支持<code class="docutils literal"><span class="pre">\n</span></code>换行，要换行需要特殊处理</li>
<li><code class="docutils literal"><span class="pre">-r</span></code>：禁止反斜线的转义功能，这意味着<code class="docutils literal"><span class="pre">\</span></code>会变成文本的一部分</li>
<li><code class="docutils literal"><span class="pre">-s</span></code>：静默模式，输入的内容不会回显在屏幕上，常用来获取密码输入</li>
<li><code class="docutils literal"><span class="pre">-t</span></code>：给出超时时间，在达到超时时间时，read退出并返回错误，也就是说不会读取任何内容，即使已经输入了一部分</li>
</ul>
<p><code class="docutils literal"><span class="pre">-a</span></code>选项将读取的内容分配给数组变量，从索引号0开始分配</p>
<div class="figure">
<img alt="../../_images/12.png" src="../../_images/12.png" />
</div>
<p><code class="docutils literal"><span class="pre">-d</span></code>选项指定读取行的结束符号，而不再使用换行符</p>
<div class="figure">
<img alt="../../_images/21.png" src="../../_images/21.png" />
</div>
<p><code class="docutils literal"><span class="pre">-n</span></code>和<code class="docutils literal"><span class="pre">-N</span></code>选项限制输入字符</p>
<div class="figure">
<img alt="../../_images/31.png" src="../../_images/31.png" />
</div>
<p><code class="docutils literal"><span class="pre">-p</span></code>选项输出提示字符串</p>
<div class="figure">
<img alt="../../_images/4.png" src="../../_images/4.png" />
</div>
<p><code class="docutils literal"><span class="pre">-p</span></code>选项默认不带换行功能，且也不支持<code class="docutils literal"><span class="pre">\n</span></code>换行，但通过<code class="docutils literal"><span class="pre">$'string'</span></code>的方式特殊处理，就可以实现换行的功能；关于<code class="docutils literal"><span class="pre">$'String'</span></code>和<code class="docutils literal"><span class="pre">$&quot;String&quot;</span></code>的作用，详见<a class="reference external" href="http://www.cnblogs.com/f-ck-need-u/p/8454364.html">shell中加引号有什么用</a></p>
<div class="figure">
<img alt="../../_images/5.png" src="../../_images/5.png" />
</div>
<p><code class="docutils literal"><span class="pre">-s</span></code>选项用来获取密码输入</p>
<div class="figure">
<img alt="../../_images/6.png" src="../../_images/6.png" />
</div>
<p><code class="docutils literal"><span class="pre">-t</span></code>选项给出输入时间限制，没完成的输入将被丢弃，所有变量将赋值为空(如果在执行read前，变量已被赋值，则此变量在read超时后将被覆盖为空)</p>
<div class="figure">
<img alt="../../_images/7.png" src="../../_images/7.png" />
</div>
<p><code class="docutils literal"><span class="pre">read</span></code>也可以用来在shell脚本中读取文件内容</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="c1"># 每读取文件一行内容，就会进入一次while循环，直到读完文件尾部退出循环</span>

<span class="c1"># 读取文件方法一</span>
<span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span> <span class="k">do</span>
        <span class="nb">echo</span> <span class="nv">$line</span>
<span class="k">done</span> &lt; /etc/passwd

<span class="c1"># 读取文件方法二</span>
<span class="nb">exec</span> &lt;/etc/passwd<span class="p">;</span><span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span> <span class="k">do</span>
<span class="nb">echo</span> <span class="nv">$line</span>
<span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="x01-echo">
<span id="echoll"></span><h2>0x01 echo<a class="headerlink" href="#x01-echo" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">echo</span></code>命令类似于<code class="docutils literal"><span class="pre">c中printf</span></code>，用于标准输出，它是shell内建命令，使用<code class="docutils literal"><span class="pre">help</span> <span class="pre">read</span></code>命令可以查看其语法格式和使用说明，它的语法格式如下</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="o">[</span>-neE<span class="o">]</span> <span class="o">[</span>arg ...<span class="o">]</span>
</pre></div>
</div>
<p>它的执行逻辑是：将给定<code class="docutils literal"><span class="pre">arg</span></code>内容按照<code class="docutils literal"><span class="pre">-neE</span></code>选项指定的不同方式输出</p>
<p><code class="docutils literal"><span class="pre">echo</span></code>命令常用的选项有</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-n</span></code>：取消分行输出</li>
<li><code class="docutils literal"><span class="pre">-e</span></code>：支持字符串内转义字符的显示输出</li>
</ul>
<p>关于<code class="docutils literal"><span class="pre">echo</span></code>命令的使用，主要关注一些几点</p>
<ul>
<li><p class="first">echo中的引号和感叹号：在bash环境中，感叹号只能通过单引号包围来输出，不能通过双引号来包围输出，原因有</p>
<blockquote>
<div><ul class="simple">
<li>在bash环境中，感叹号表示引用历史命令，除非设置<code class="docutils literal"><span class="pre">set</span> <span class="pre">+H</span></code>关闭历史命令的引用</li>
<li><code class="docutils literal"><span class="pre">''</span></code>：单引号表示强引用，该操作符的优先级大于!，即不会进行历史命令的引用，直接引用显示全部字符</li>
<li><code class="docutils literal"><span class="pre">&quot;&quot;</span></code>：双引号表示弱引用，该操作符的优先级小于!，即先进行历史命令的引用，然后再引用显示全部字符</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="figure">
<img alt="../../_images/8.png" src="../../_images/8.png" />
</div>
<div class="figure">
<img alt="../../_images/9.png" src="../../_images/9.png" />
</div>
<ul class="simple">
<li>echo中的转义：通过<code class="docutils literal"><span class="pre">-e</span></code>选项识别转义和特殊意义的符号，如<code class="docutils literal"><span class="pre">换行符\n、制表符\t、转义符\</span></code>等</li>
</ul>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;hello world&quot;</span>   <span class="c1"># 打印字符串</span>

<span class="c1"># -e选项支持字符串内转义字符的显示输出</span>
<span class="nb">echo</span> -e <span class="s2">&quot;hello\bworld&quot;</span>        <span class="c1"># 删除前面的字符，输出hellworld</span>
<span class="nb">echo</span> -e <span class="s2">&quot;hello\tworld&quot;</span>        <span class="c1"># 制表符，输出hello     world</span>
<span class="nb">echo</span> -e <span class="s2">&quot;hello\vworld&quot;</span>        <span class="c1"># 垂直制表符</span>
<span class="nb">echo</span> -e <span class="s2">&quot;hello\nworld&quot;</span>        <span class="c1"># 换行符</span>
</pre></div>
</div>
<ul class="simple">
<li>echo中的分行处理：默认情况下<code class="docutils literal"><span class="pre">echo</span></code>会在每行行尾加上换行符号，使用<code class="docutils literal"><span class="pre">-n</span></code>选项可以取消分行输出</li>
</ul>
<div class="figure">
<img alt="../../_images/10.png" src="../../_images/10.png" />
</div>
<ul>
<li><p class="first">echo中的颜色输出：echo可以控制字体颜色和背景颜色输出，因为需要使用特殊符号，所以需要配合<code class="docutils literal"><span class="pre">-e</span></code>选项来识别特殊符号</p>
<blockquote>
<div><ul>
<li><p class="first">常见的字体颜色：<code class="docutils literal"><span class="pre">重置=0，黑色=30，红色=31，绿色=32，黄色=33，蓝色=34，紫色=35，天蓝色=36，白色=37</span></code></p>
</li>
<li><p class="first">常见的背景颜色：<code class="docutils literal"><span class="pre">重置=0，黑色=40，红色=41，绿色=42，黄色=43，蓝色=44，紫色=45，天蓝色=46，白色=47</span></code></p>
</li>
<li><p class="first">字体控制选项：<code class="docutils literal"><span class="pre">1表示高亮，4表示下划线，5表示闪烁</span></code></p>
</li>
<li><p class="first">着色显示字符串格式为：<code class="docutils literal"><span class="pre">&quot;\033[&#64;;&#64;mSTRING\033[0;0m&quot;</span></code>从左往右各字段的含义依次是</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">\033</span></code>表示定义一个转义序列，也可以使用<code class="docutils literal"><span class="pre">\e</span></code></li>
<li><code class="docutils literal"><span class="pre">[</span></code>表示开始定义颜色</li>
<li><code class="docutils literal"><span class="pre">&#64;;&#64;</span></code>表示颜色定义，第一个<code class="docutils literal"><span class="pre">&#64;</span></code>表示字背景颜色，颜色范围40–47；<code class="docutils literal"><span class="pre">;</span></code>用来分隔字背景颜色和文字颜色；第二个<code class="docutils literal"><span class="pre">&#64;</span></code>表示文字颜色，颜色范围30–37。如果没有相关定义则表示默认颜色</li>
<li><code class="docutils literal"><span class="pre">m</span></code>表示颜色定义完毕</li>
<li><code class="docutils literal"><span class="pre">STRING</span></code>表示要输出的字符串</li>
<li><code class="docutils literal"><span class="pre">\033</span></code>表示定义一个转义序列，也可以使用<code class="docutils literal"><span class="pre">\e</span></code></li>
<li><code class="docutils literal"><span class="pre">[</span></code>表示再次开启颜色定义</li>
<li><code class="docutils literal"><span class="pre">0;0m</span></code>表示将前面定义的背景颜色和文字颜色重置为默认颜色；注意定义了颜色之后就需要使用此项来重置关闭颜色，否则会继续影响bash环境的颜色，前面定义了几个<code class="docutils literal"><span class="pre">&#64;</span></code>，该处就应该使用几个<code class="docutils literal"><span class="pre">0</span></code>来重置对应的颜色</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">echo</span> -e <span class="s2">&quot;\033[32mhello\033[0m&quot;</span>        <span class="c1"># 着色显示，默认背景颜色，字颜色为32绿色</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[34m 蓝色字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[35m 紫色字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[36m 天蓝字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[37m 白色字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[40;37m 黑底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37m 红底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[42;37m 绿底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[43;37m 黄底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[44;37m 蓝底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[45;37m 紫底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[46;37m 天蓝底白字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[47;30m 白底黑字 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;0m 关闭所有属性 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;1m 设置高亮度 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;4m 下划线 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;5m 闪烁 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;7m 反显 \033[0m&quot;</span>
<span class="nb">echo</span> -e <span class="s2">&quot;\033[41;37;8m 消隐 \033[0m&quot;</span>
</pre></div>
</div>
<div class="figure">
<img alt="../../_images/111.png" src="../../_images/111.png" />
</div>
<div class="figure">
<img alt="../../_images/121.png" src="../../_images/121.png" />
</div>
</div>
<div class="section" id="x02-printf">
<span id="printfll"></span><h2>0x02 printf<a class="headerlink" href="#x02-printf" title="永久链接至标题">¶</a></h2>
<p>使用<code class="docutils literal"><span class="pre">printf</span></code>命令可以输出比<code class="docutils literal"><span class="pre">echo</span></code>更规则更格式化的结果，它引用于C语言的printf函数，但是有些许区别；它也是shell内建命令，使用<code class="docutils literal"><span class="pre">help</span> <span class="pre">printf</span></code>命令可以查看其语法格式和使用说明，它的语法格式如下</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">printf</span> <span class="o">[</span>-v var<span class="o">]</span> format <span class="o">[</span>arguments<span class="o">]</span>
</pre></div>
</div>
<p>其执行逻辑是：按照<code class="docutils literal"><span class="pre">format</span></code>定义的输出格式将<code class="docutils literal"><span class="pre">arguments</span></code>输出到指定位置；默认是输出到标准输出，如果使用了<code class="docutils literal"><span class="pre">-v</span></code>选项表示将<code class="docutils literal"><span class="pre">arguments</span></code>按照指定格式赋值给该选项指定的变量<code class="docutils literal"><span class="pre">var</span></code></p>
<p>使用<code class="docutils literal"><span class="pre">printf</span></code>最需要注意以下两点</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">printf</span></code>默认不在结尾加换行符，它不像<code class="docutils literal"><span class="pre">echo</span></code>一样，所以要手动加<code class="docutils literal"><span class="pre">\n</span></code>换号符</li>
<li><code class="docutils literal"><span class="pre">printf</span></code>只是格式化输出，不会改变任何结果，所以在格式化浮点数的输出时，浮点数结果是不变的，仅仅只是改变了显示的结果</li>
</ul>
<p>使用<code class="docutils literal"><span class="pre">printf</span></code>可以实现</p>
<ul class="simple">
<li>指定字符串的宽度</li>
<li>实现左对齐(使用<code class="docutils literal"><span class="pre">-</span></code>)</li>
<li>实现右对齐(默认值)</li>
<li>格式化小数输出</li>
</ul>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># 三个%分别对应后面的三个参数</span>
<span class="c1"># 减号&quot;-&quot;表示左对齐，默认表示右对齐</span>
<span class="c1"># 减号&quot;-&quot;后面的数字n表示占用n个字符</span>
<span class="c1"># 点号&quot;.&quot;后面的数字m表示取小数点后m位</span>
<span class="c1"># s表示对应一个字符串变量</span>
<span class="c1"># f表示对应一个浮点数变量</span>
<span class="c1"># d表示对应一个整数变量</span>
<span class="c1"># \t表示制表符</span>
<span class="c1"># \n表示换行符</span>
<span class="nb">printf</span> <span class="s2">&quot;%-s\t %-s\t %s\n&quot;</span> No Name Mark
<span class="nb">printf</span> <span class="s2">&quot;%-s\t %-s\t %4.2f\n&quot;</span> <span class="m">1</span> Sarath <span class="m">80</span>.34
<span class="nb">printf</span> <span class="s2">&quot;%-s\t %-s\t %4.2f\n&quot;</span> <span class="m">2</span> James <span class="m">90</span>.998
<span class="nb">printf</span> <span class="s2">&quot;%-s\t %-s\t %4.2f\n&quot;</span> <span class="m">3</span> Jeff <span class="m">77</span>.564

<span class="c1"># 执行结果如下</span>
<span class="c1"># No            Name            Mark</span>
<span class="c1"># 1             Sarath          80.34</span>
<span class="c1"># 2             James           91.00</span>
<span class="c1"># 3             Jeff            77.56</span>
</pre></div>
</div>
</div>
<div class="section" id="x03-shift">
<span id="shiftll"></span><h2>0x03 shift<a class="headerlink" href="#x03-shift" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal"><span class="pre">shift</span></code>命令在shell脚本中用来剔除脚本的位置变量，它是shell内建命令，使用<code class="docutils literal"><span class="pre">help</span> <span class="pre">shift</span></code>命令可以查看其语法格式和使用说明，它的语法格式如下</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">shift</span> <span class="o">[</span>n<span class="o">]</span>
</pre></div>
</div>
<p>该命令常用来解析脚本的传入参数</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">shift</span></code>表示剔除脚本的第一个传入参数，后面参数往前排</li>
<li><code class="docutils literal"><span class="pre">shift</span> <span class="pre">n</span></code>表示剔除脚本的前n个传入参数，后面参数往前排</li>
</ul>
</div></blockquote>
<p>写一个脚本，使用形式：<code class="docutils literal"><span class="pre">userinfo.sh</span> <span class="pre">-u</span> <span class="pre">username</span> <span class="pre">[-v</span> <span class="pre">{1|2}]</span></code></p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">-u</span></code>选项用于指定用户，而后脚本显示用户的UID和GID</li>
<li><code class="docutils literal"><span class="pre">-v</span></code>选项后面是1，则显示用户的家目录路径；如果是2，则显示用户的家目录路径和shell</li>
</ul>
</div></blockquote>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="o">[</span> <span class="nv">$#</span> -lt <span class="m">2</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;less arguments&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">3</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;-u&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">userName</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
        <span class="nb">shift</span> <span class="m">2</span>       <span class="c1"># 剔除前2个位置参数</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$#</span> -ge <span class="m">2</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;-v&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">verFlag</span><span class="o">=</span><span class="nv">$2</span>
<span class="k">fi</span>

<span class="nv">verFlag</span><span class="o">=</span><span class="si">${</span><span class="nv">verFlag</span><span class="k">:-</span><span class="nv">0</span><span class="si">}</span>

<span class="k">if</span> <span class="o">[</span> -n <span class="nv">$verFlag</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="k">if</span> ! <span class="o">[[</span> <span class="nv">$verFlag</span> <span class="o">=</span>~ <span class="o">[</span><span class="m">012</span><span class="o">]</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
                <span class="nb">echo</span> <span class="s2">&quot;Wrong Parameter&quot;</span>
                <span class="nb">echo</span> <span class="s2">&quot;Usage: `basename </span><span class="nv">$0</span><span class="s2">` -u UserName -v {1|2}&quot;</span>
                <span class="nb">exit</span> <span class="m">4</span>
        <span class="k">fi</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$verFlag</span> -eq <span class="m">1</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
        grep <span class="s2">&quot;^</span><span class="nv">$userName</span><span class="s2">&quot;</span> /etc/passwd <span class="p">|</span> cut -d: -f1,3,4,6
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$verFlag</span> -eq <span class="m">2</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
        grep <span class="s2">&quot;^</span><span class="nv">$userName</span><span class="s2">&quot;</span> /etc/passwd <span class="p">|</span> cut -d: -f1,3,4,6,7
<span class="k">else</span>
        grep <span class="s2">&quot;^</span><span class="nv">$userName</span><span class="s2">&quot;</span> /etc/passwd <span class="p">|</span> cut -d: -f1,3,4
<span class="k">fi</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../2-commonfunc/index.html" class="btn btn-neutral float-right" title="常用函数" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../0-commonvar/index.html" class="btn btn-neutral" title="常用环境变量" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, HappyAnony.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>